<div class="page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Users</h1>
      <p class="page-subtitle">Manage access and roles</p>
    </div>
    <%= link_to "Create New User", new_user_path, class: "btn" %>
  </div>

  <% if flash[:notice].present? %>
    <div class="inline-flash inline-flash--notice"><%= flash[:notice] %></div>
  <% end %>

  <% if flash[:alert].present? %>
    <div class="inline-flash inline-flash--alert"><%= flash[:alert] %></div>
  <% end %>

  <div class="table-card">
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Created</th>
          <th class="text-right">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <tr>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td>
              <span class="badge"><%= user.role.capitalize %></span>
            </td>
            <td><%= user.created_at.strftime("%b %d, %Y") %></td>
            <td class="text-right action-cell">
              <%= link_to "Edit", edit_user_path(user), class: "table-action" %>
              <% if user != current_user %>
                <%= link_to "Delete", user_path(user), method: :delete, data: { confirm: "Are you sure?" }, class: "table-action" %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <% if @users.empty? %>
    <div class="empty-state">
      <p class="empty-title">No users found</p>
      <p class="empty-sub">Add your first teammate to get started.</p>
      <%= link_to "Create one now", new_user_path, class: "btn" %>
    </div>
  <% end %>
</div>

<style>
.page { max-width: 1100px; margin: 0 auto; display: flex; flex-direction: column; gap: 16px; }
.page-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.page-title { font-size: 24px; font-weight: 700; color: var(--text); }
.page-subtitle { font-size: 14px; color: #6b7280; }

.inline-flash { padding: 12px 14px; border-radius: 10px; border: 1px solid var(--border); font-weight: 600; background: var(--card); }
.inline-flash--notice { border-color: rgba(45,138,117,0.30); background: rgba(45,138,117,0.08); color: var(--accent); }
.inline-flash--alert { border-color: #fcd34d; background: #fffbeb; color: #92400e; }

.table-card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(15,23,42,0.05); }
.table { width: 100%; border-collapse: collapse; }
.table thead { background: rgba(45,138,117,0.08); }
.table th { text-align: left; padding: 12px 14px; font-size: 12px; text-transform: uppercase; letter-spacing: 0.04em; color: #6b7280; border-bottom: 1px solid var(--border); }
.table td { padding: 14px; border-bottom: 1px solid var(--border); font-size: 14px; color: var(--text); }
.table tr:hover td { background: #f6f7f8; }
.text-right { text-align: right; }

.badge { display: inline-flex; align-items: center; padding: 6px 10px; border-radius: 999px; font-weight: 600; font-size: 12px; background: rgba(45,138,117,0.10); color: var(--accent); border: 1px solid rgba(45,138,117,0.25); }

.action-cell { display: flex; justify-content: flex-end; gap: 10px; }
.table-action { color: var(--accent); font-weight: 600; text-decoration: none; padding: 6px 10px; border: 1px solid rgba(45,138,117,0.25); border-radius: 8px; transition: background-color 0.12s ease, border-color 0.12s ease; }
.table-action:hover { background: rgba(45,138,117,0.08); border-color: rgba(45,138,117,0.40); }

.empty-state { margin-top: 10px; background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 22px; text-align: center; box-shadow: 0 2px 8px rgba(15,23,42,0.05); display: flex; flex-direction: column; gap: 8px; align-items: center; }
.empty-title { font-weight: 700; color: var(--text); font-size: 16px; }
.empty-sub { color: #6b7280; font-size: 13px; }

@media (max-width: 720px) {
  .page-header { flex-direction: column; align-items: flex-start; }
  .action-cell { flex-wrap: wrap; }
}
</style>
