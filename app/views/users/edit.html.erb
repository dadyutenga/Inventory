<div class="page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Edit User</h1>
      <p class="page-subtitle">Update account details and role</p>
    </div>
    <%= link_to "Back to Users", users_path, class: "btn" %>
  </div>

  <% if @user.errors.any? %>
    <div class="inline-flash inline-flash--alert">
      <strong><%= pluralize(@user.errors.count, "error") %> prohibited this user:</strong>
      <ul class="flash-list">
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-card">
    <%= form_with model: @user, local: true, class: "form" do |f| %>
      <div class="form-grid">
        <div class="form-group">
          <%= f.label :name %>
          <%= f.text_field :name, required: true, class: "input" %>
        </div>

        <div class="form-group">
          <%= f.label :email %>
          <%= f.email_field :email, required: true, class: "input" %>
        </div>

        <div class="form-group">
          <%= f.label :password, "Password (leave blank to keep current)" %>
          <%= f.password_field :password, minlength: 6, class: "input" %>
          <p class="help-text">Minimum 6 characters (optional)</p>
        </div>

        <div class="form-group">
          <%= f.label :password_confirmation, "Confirm Password" %>
          <%= f.password_field :password_confirmation, minlength: 6, class: "input" %>
        </div>

        <div class="form-group">
          <%= f.label :role %>
          <%= f.select :role, [["Employee", "employee"], ["Admin", "admin"]], { selected: @user.role }, class: "input" %>
        </div>
      </div>

      <div class="form-actions">
        <%= f.submit "Update User", class: "btn btn-block" %>
      </div>
    <% end %>
  </div>
</div>

<style>
.page { max-width: 720px; margin: 0 auto; display: flex; flex-direction: column; gap: 16px; }
.page-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.page-title { font-size: 24px; font-weight: 700; color: var(--text); }
.page-subtitle { color: #6b7280; font-size: 14px; }

.inline-flash { padding: 12px 14px; border-radius: 10px; border: 1px solid #fcd34d; background: #fffbeb; color: #92400e; font-weight: 600; }
.flash-list { margin: 8px 0 0 16px; color: #92400e; }

.form-card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 18px; box-shadow: 0 3px 10px rgba(15,23,42,0.06); }
.form { display: flex; flex-direction: column; gap: 16px; }
.form-grid { display: grid; grid-template-columns: 1fr; gap: 14px; }
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-group label { font-weight: 600; color: var(--text); font-size: 14px; }
.input { padding: 10px 12px; border-radius: 8px; border: 1px solid var(--border); font-size: 14px; color: var(--text); background: #fff; transition: border-color 0.12s ease, box-shadow 0.12s ease; }
.input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(45,138,117,0.15); }
.help-text { font-size: 12px; color: #6b7280; }
.form-actions { display: flex; gap: 10px; justify-content: flex-end; }
.btn-block { width: 100%; justify-content: center; text-align: center; }

@media (max-width: 640px) {
  .page-header { flex-direction: column; align-items: flex-start; }
}
</style>
