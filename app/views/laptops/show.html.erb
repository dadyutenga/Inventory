<div class="laptop-show">
  <div class="header">
    <h1><%= @laptop.display_name %></h1>
    <div class="header-actions">
      <%= link_to "Edit", edit_laptop_path(@laptop), class: "btn" %>
      <%= link_to "Back to List", laptops_path, class: "btn" %>
      <% if current_user.admin? %>
        <%= button_to "Delete", laptop_path(@laptop), method: :delete,
                      data: { turbo_confirm: "Are you sure?" },
                      class: "btn" %>
      <% end %>
    </div>
  </div>

  <!-- Image Gallery -->
  <% if @laptop.images.attached? %>
    <div class="image-gallery">
      <% @laptop.images.each do |image| %>
        <div class="gallery-item">
          <%= image_tag image.variant(resize_to_limit: [400, 300]), alt: @laptop.display_name %>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="no-images">No images available</div>
  <% end %>

  <!-- Status Badges -->
  <div class="status-section">
    <span class="badge"><%= @laptop.status.humanize %></span>
    <span class="badge"><%= @laptop.condition.humanize %></span>
  </div>

  <!-- Specifications Sections -->
  <div class="specs-container">
    <!-- Basic Information -->
    <div class="spec-section">
      <h2>Basic Information</h2>
      <table class="spec-table">
        <tr><th>SKU</th><td><%= @laptop.sku %></td></tr>
        <tr><th>Vendor/Supplier</th><td><%= @laptop.vendor %></td></tr>
        <tr><th>Brand</th><td><%= @laptop.brand %></td></tr>
        <tr><th>Model</th><td><%= @laptop.model %></td></tr>
        <tr><th>Model Number</th><td><%= @laptop.model_number %></td></tr>
        <tr><th>Serial Number</th><td><%= @laptop.serial_number %></td></tr>
        <tr><th>Purchase Date</th><td><%= @laptop.purchase_date&.strftime("%B %d, %Y") %></td></tr>
        <tr><th>Purchase Price</th><td><%= format_currency(@laptop.purchase_price) if @laptop.purchase_price %></td></tr>
        <tr><th>Condition</th><td><%= @laptop.condition.humanize %></td></tr>
      </table>
    </div>

    <!-- Hardware Specifications -->
    <div class="spec-section">
      <h2>Hardware Specifications</h2>
      <table class="spec-table">
        <tr><th>CPU</th><td><%= @laptop.cpu %></td></tr>
        <tr><th>CPU Generation</th><td><%= @laptop.cpu_generation %></td></tr>
        <tr><th>GPU</th><td><%= @laptop.gpu %></td></tr>
        <tr><th>RAM Size</th><td><%= @laptop.ram_size %></td></tr>
        <tr><th>RAM Type</th><td><%= @laptop.ram_type %></td></tr>
        <tr><th>Storage Capacity</th><td><%= @laptop.storage_capacity %></td></tr>
        <tr><th>Storage Type</th><td><%= @laptop.storage_type %></td></tr>
        <tr><th>Screen Size</th><td><%= @laptop.screen_size %></td></tr>
        <tr><th>Screen Resolution</th><td><%= @laptop.screen_resolution %></td></tr>
        <tr><th>Display Type</th><td><%= @laptop.display_type %></td></tr>
        <tr><th>Keyboard Type</th><td><%= @laptop.keyboard_type %></td></tr>
        <tr><th>Keyboard Backlight</th><td><%= @laptop.keyboard_backlight ? "Yes" : "No" %></td></tr>
        <tr><th>Battery Capacity</th><td><%= @laptop.battery_capacity %></td></tr>
        <tr><th>Webcam</th><td><%= @laptop.webcam ? "Yes" : "No" %></td></tr>
        <tr><th>Microphone</th><td><%= @laptop.microphone ? "Yes" : "No" %></td></tr>
        <tr><th>WiFi Type</th><td><%= @laptop.wifi_type %></td></tr>
        <tr><th>Bluetooth Version</th><td><%= @laptop.bluetooth_version %></td></tr>
        <tr><th>Ports</th><td><%= simple_format(@laptop.ports) %></td></tr>
        <tr><th>Weight</th><td><%= @laptop.weight %></td></tr>
      </table>
    </div>

    <!-- Software & OS -->
    <div class="spec-section">
      <h2>Software & Operating System</h2>
      <table class="spec-table">
        <tr><th>Operating System</th><td><%= @laptop.operating_system %></td></tr>
        <tr><th>License Key</th><td><%= @laptop.license_key %></td></tr>
      </table>
    </div>

    <!-- Status & Tracking -->
    <div class="spec-section">
      <h2>Status & Tracking</h2>
      <table class="spec-table">
        <tr><th>Status</th><td><%= @laptop.status.humanize %></td></tr>
        <tr><th>Allocated To</th><td><%= @laptop.allocated_to&.name || @laptop.allocated_to&.email %></td></tr>
        <tr><th>Last Service Date</th><td><%= @laptop.last_service_date&.strftime("%B %d, %Y") %></td></tr>
        <tr><th>Next Service Due</th><td><%= @laptop.next_service_due&.strftime("%B %d, %Y") %></td></tr>
        <tr><th>Notes</th><td><%= simple_format(@laptop.notes) %></td></tr>
      </table>
    </div>
  </div>

  <!-- Sale Information (if sold) -->
  <% if @laptop.sale %>
    <div class="sale-section">
      <h2>Sale Information</h2>
      <table class="spec-table">
        <tr><th>Sold To</th><td><%= @laptop.sale.sold_to %></td></tr>
        <tr><th>Sold By</th><td><%= @laptop.sale.sold_by.name || @laptop.sale.sold_by.email %></td></tr>
        <tr><th>Sale Date</th><td><%= @laptop.sale.sold_at.strftime("%B %d, %Y %I:%M %p") %></td></tr>
        <tr><th>Sale Price</th><td><%= format_currency(@laptop.sale.sale_price) %></td></tr>
        <tr><th>Invoice Reference</th><td><%= @laptop.sale.invoice_ref %></td></tr>
      </table>
    </div>
  <% end %>
</div>

<style>
.laptop-show { max-width: 1200px; margin: 0 auto; padding: 20px; }
.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.header-actions { display: flex; gap: 10px; }
.image-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-bottom: 24px; background: var(--card); padding: 18px; border-radius: 10px; border: 1px solid var(--border); }
.gallery-item img { width: 100%; height: auto; border-radius: 8px; border: 1px solid var(--border); }
.no-images { text-align: center; padding: 32px; background: var(--card); border-radius: 10px; color: #9ca3af; margin-bottom: 24px; border: 1px solid var(--border); }
.status-section { margin-bottom: 22px; display: flex; gap: 8px; flex-wrap: wrap; }
.specs-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(420px, 1fr)); gap: 20px; }
.spec-section { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 18px; box-shadow: 0 3px 10px rgba(15,23,42,0.06); }
.spec-section h2 { margin: 0 0 14px 0; padding-bottom: 10px; border-bottom: 1px solid var(--border); font-size: 18px; color: var(--text); }
.spec-table { width: 100%; border-collapse: collapse; }
.spec-table th { text-align: left; padding: 10px; background: #f7f7f8; font-weight: 600; width: 40%; border-bottom: 1px solid var(--border); color: var(--text); }
.spec-table td { padding: 10px; border-bottom: 1px solid var(--border); color: #374151; }
.spec-table tr:last-child th, .spec-table tr:last-child td { border-bottom: none; }
.sale-section { margin-top: 24px; background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 18px; box-shadow: 0 3px 10px rgba(15,23,42,0.06); }
.sale-section h2 { margin: 0 0 12px 0; color: var(--text); }
.badge { display: inline-flex; align-items: center; padding: 6px 10px; border-radius: 999px; font-size: 13px; margin-right: 6px; font-weight: 600; background: rgba(45,138,117,0.10); color: var(--accent); border: 1px solid rgba(45,138,117,0.25); }
</style>
