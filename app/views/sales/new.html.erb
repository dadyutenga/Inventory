<div class="container">
  <div class="header-section">
    <h1>Record New Sale</h1>
    <%= link_to "Back to Sales", sales_path, class: "btn" %>
  </div>

  <%= form_with(model: @sale, local: true, class: "sale-form") do |form| %>
    <% if @sale.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@sale.errors.count, "error") %> prohibited this sale from being saved:</h2>
        <ul>
          <% @sale.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-section">
      <h2>Sale Information</h2>
      
      <div class="form-row">
        <div class="form-group">
          <%= form.label :product_id, "Product *" %>
          <%= form.collection_select :product_id, @products, :id, :display_name,
                                    { prompt: "Select a product..." },
                                    { required: true, class: "form-control" } %>
        </div>

        <div class="form-group">
          <%= form.label :sold_to, "Customer Name *" %>
          <%= form.text_field :sold_to, required: true, placeholder: "Enter customer name", class: "form-control" %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :sold_at, "Sale Date & Time *" %>
          <%= form.datetime_local_field :sold_at, value: Time.current.strftime("%Y-%m-%dT%H:%M"), required: true, class: "form-control" %>
        </div>

        <div class="form-group">
          <%= form.label :sale_price, "Sale Price (TZS) *" %>
          <%= form.number_field :sale_price, step: 0.01, min: 0, required: true, placeholder: "0.00", class: "form-control" %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <%= form.label :invoice_ref, "Invoice Reference" %>
          <%= form.text_field :invoice_ref, placeholder: "Optional invoice number or reference", class: "form-control" %>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <%= form.submit "Record Sale", class: "btn" %>
      <%= link_to "Cancel", sales_path, class: "btn" %>
    </div>
  <% end %>
</div>

<style>
.container { max-width: 800px; margin: 0 auto; padding: 20px; }
.header-section { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.sale-form { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 24px; box-shadow: 0 3px 10px rgba(15,23,42,0.06); }
.form-section h2 { margin: 0 0 18px 0; padding-bottom: 10px; border-bottom: 1px solid var(--border); font-size: 18px; color: var(--text); }
.form-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 18px; margin-bottom: 14px; }
.form-group { display: flex; flex-direction: column; }
.form-group.full-width { grid-column: 1 / -1; }
.form-group label { margin-bottom: 6px; font-weight: 600; font-size: 14px; color: var(--text); }
.form-control { padding: 10px; border: 1px solid var(--border); border-radius: 8px; font-size: 14px; }
.form-control:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(45,138,117,0.15); }
.error-messages { background: #f9e8eb; border: 1px solid #f3c6cd; color: #7a2530; padding: 14px; border-radius: 8px; margin-bottom: 18px; }
.error-messages h2 { font-size: 15px; margin: 0 0 8px 0; }
.error-messages ul { margin: 0; padding-left: 18px; }
.form-actions { display: flex; gap: 10px; margin-top: 22px; }
@media (max-width: 768px) {
  .form-row { grid-template-columns: 1fr; }
}
</style>
