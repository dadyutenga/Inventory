<div class="container">
  <div class="header-section">
    <h1>Sale Details</h1>
    <div class="header-actions">
      <%= link_to "View Product", product_path(@sale.product), class: "btn" %>
      <%= link_to "Back to Sales", sales_path, class: "btn" %>
    </div>
  </div>

  <div class="sale-details">
    <div class="detail-section">
      <h2>Sale Information</h2>
      <table class="detail-table">
        <tr>
          <th>Invoice Reference</th>
          <td><%= @sale.invoice_ref || "N/A" %></td>
        </tr>
        <tr>
          <th>Sale Date & Time</th>
          <td><%= @sale.sold_at.strftime("%B %d, %Y at %I:%M %p") %></td>
        </tr>
        <tr>
          <th>Customer Name</th>
          <td><%= @sale.sold_to %></td>
        </tr>
        <tr>
          <th>Sale Price</th>
          <td class="price"><%= format_currency(@sale.sale_price) %></td>
        </tr>
        <tr>
          <th>Sold By</th>
          <td><%= @sale.sold_by.name || @sale.sold_by.email %> (<%= @sale.sold_by.role.humanize %>)</td>
        </tr>
      </table>
    </div>

    <div class="detail-section">
      <h2>Product Information</h2>
      <table class="detail-table">
        <tr>
          <th>Product</th>
          <td><%= link_to @sale.product.display_name, product_path(@sale.product) %></td>
        </tr>
        <tr>
          <th>SKU</th>
          <td><%= @sale.product.sku %></td>
        </tr>
        <tr>
          <th>Brand</th>
          <td><%= @sale.product.brand %></td>
        </tr>
        <tr>
          <th>Model</th>
          <td><%= @sale.product.model %></td>
        </tr>
        <tr>
          <th>Serial Number</th>
          <td><%= @sale.product.serial_number %></td>
        </tr>
        <tr>
          <th>Purchase Price</th>
          <td><%= format_currency(@sale.product.purchase_price) if @sale.product.purchase_price %></td>
        </tr>
        <% if @sale.product.purchase_price && @sale.sale_price %>
          <tr>
            <th>Profit/Loss</th>
            <td class="profit-loss">
              <% diff = @sale.sale_price - @sale.product.purchase_price %>
              <%= diff >= 0 ? "Profit: #{format_currency(diff)}" : "Loss: #{format_currency(diff.abs)}" %>
            </td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>

<style>
.container { max-width: 1000px; margin: 0 auto; padding: 20px; }
.header-section { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.header-actions { display: flex; gap: 10px; }
.sale-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(420px, 1fr)); gap: 20px; }
.detail-section { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 18px; box-shadow: 0 3px 10px rgba(15,23,42,0.06); }
.detail-section h2 { margin: 0 0 14px 0; padding-bottom: 10px; border-bottom: 1px solid var(--border); font-size: 18px; color: var(--text); }
.detail-table { width: 100%; border-collapse: collapse; }
.detail-table th { text-align: left; padding: 11px; background: #f7f7f8; font-weight: 600; width: 42%; border-bottom: 1px solid var(--border); color: var(--text); }
.detail-table td { padding: 11px; border-bottom: 1px solid var(--border); color: #374151; }
.detail-table tr:last-child th, .detail-table tr:last-child td { border-bottom: none; }
.detail-table a { color: var(--accent); text-decoration: none; }
.detail-table a:hover { text-decoration: underline; }
.price { font-weight: 700; color: var(--text); font-size: 16px; }
.profit-loss { font-weight: 700; color: var(--text); }
</style>
